<html>
<head>
<title>RoutingFilterActions.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(204,120,50); }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(128,128,128); }
.s3 { color: rgb(104,151,187); }
.s4 { color: rgb(106,135,89); }
.s5 { color: rgb(98,151,85); font-style: italic; }
</style>
</head>
<BODY BGCOLOR="#2b2b2b">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
RoutingFilterActions.py</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">from </span><span class="s1">tikapy </span><span class="s0">import </span><span class="s1">TikapyClient 
</span><span class="s0">from </span><span class="s1">tikapy </span><span class="s0">import </span><span class="s1">TikapySslClient 
</span><span class="s2">#import main</span><span class="s1"> 
 
</span><span class="s0">class </span><span class="s1">RoutingFilterActions: 
    </span><span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">,</span><span class="s1">address</span><span class="s0">,</span><span class="s1">username</span><span class="s0">,</span><span class="s1">password): 
        self.client = TikapyClient( address</span><span class="s0">, </span><span class="s3">8728 </span><span class="s1">) 
        self.client.login( username</span><span class="s0">,</span><span class="s1">password) 
 
    </span><span class="s0">def </span><span class="s1">setAction(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">action=</span><span class="s4">&quot;jump&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set action 
        :param number: 
        :param action: accept, discard,jump,log,passthrough,reject,return 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=action=' </span><span class="s1">+ action] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setJumpTarget(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">tgt=</span><span class="s4">&quot;dynamic-in&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set target 
        :param number: 
        :param tgt: connected-in,dynamic-in,mme-in,ospf-in,ospf-out 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=jump-target=' </span><span class="s1">+ tgt] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setDistance(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">distance): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set distance 
        :param number: 
        :param distance: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=distance=' </span><span class="s1">+ distance] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setScope(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">scope): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set scope to 255 
        :param number: 
        :param scope: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=scope=' </span><span class="s1">+ scope] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setTargetScope(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">scope=</span><span class="s4">&quot;200&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set target scope to 255 
        :param number: 
        :param scope: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=target-scope=' </span><span class="s1">+ scope] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setPrefSource(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">source=</span><span class="s4">&quot;172.16.53.2&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set pref source 
        :param number: 
        :param source: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-pref-src=' </span><span class="s1">+ source] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setNextHop(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">nhop): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set next hop 
        :param number: 
        :param nhop: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-in-nexthop=' </span><span class="s1">+ nhop] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setInNxtHopDirect(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">iface=</span><span class="s4">&quot;ether1&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set next hop direction 
        :param number: 
        :param iface: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-in-nexthop-direct='</span><span class="s1">+iface] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setOutNextHop(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">nhop=</span><span class="s4">&quot;172.16.53.2&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set nhop iface 
        :param number: 
        :param nhop: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-out-nexthop=' </span><span class="s1">+ nhop] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setRoutingMark(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">mark=</span><span class="s4">&quot;main&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set  routing mark 
        :param number: 
        :param mark: main 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-routing-mark=' </span><span class="s1">+ mark] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setRouteCOmment(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">comment): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set route comment 
        :param number: 
        :param comment: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=route-comment=' </span><span class="s1">+ comment] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setCheckGw(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">gw=</span><span class="s4">&quot;arp&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set gw protocol 
        :param number: 
        :param gw: arp, ping, none 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-check-gateway=' </span><span class="s1">+ gw] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setDisabled(self</span><span class="s0">,</span><span class="s1">number): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set action to be disabled 
        :param number: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-disabled=yes'</span><span class="s1">] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">unsetDIsabled(self</span><span class="s0">,</span><span class="s1">number): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will unset disable status of action 
        :param number: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-disabled=no'</span><span class="s1">] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setType(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">type=</span><span class="s4">&quot;prohibit&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set type 
        :param number: 
        :param type: blackhole,prohibit,unicast,unreachable 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-type='</span><span class="s1">+type] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setRouteTag(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">tag=</span><span class="s4">&quot;10&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set route tag 
        :param number: 
        :param tag: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-route-tag='</span><span class="s1">+tag] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setUseTeNextHop(self</span><span class="s0">,</span><span class="s1">number): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will use te nhop 
        :param number: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-use-te-nexthop=yes'</span><span class="s1">] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">unsetUseTeNextHop(self</span><span class="s0">, </span><span class="s1">number): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will use te nhop 
        :param number: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-use-te-nexthop=no'</span><span class="s1">] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setRouteTargets(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">tgts=</span><span class="s4">&quot;1:10&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will s 
        :param number: 
        :param tgts: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-route-targets='</span><span class="s1">+tgts] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setAppendRouteTargets(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">tgts=</span><span class="s4">&quot;1:10&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will append route targets 
        :param number: 
        :param tgts: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=append-route-targets=' </span><span class="s1">+ tgts] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setSIteOfOrigin(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">orig=</span><span class="s4">&quot;1:10&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Methodwill set site of origin 
        :param number: 
        :param orig: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-site-of-origin=' </span><span class="s1">+ orig] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setInNextHopIpv6(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">ipv6): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set ipv6 nhop 
        :param number: 
        :param ipv6: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-in-nexthop-ipv6=' </span><span class="s1">+ ipv6] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setInNextHopIpv6LinkLocal(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">ipv6</span><span class="s0">,</span><span class="s1">iface=</span><span class="s4">&quot;ether1&quot;</span><span class="s1">): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set ipv6 link local 
        :param number: 
        :param ipv6: 
        :param iface 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-in-nexthop-linklocal='</span><span class="s1">+ipv6+</span><span class="s4">&quot;%&quot;</span><span class="s1">+iface] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setOutNextHopIpv6(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">nhop): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method will set nhop ipv6 
        :param number: 
        :param nhop: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-out-nexthop-ipv6=' </span><span class="s1">+ nhop] ) 
        </span><span class="s0">return </span><span class="s1">filt 
 
    </span><span class="s0">def </span><span class="s1">setOutNextHopLinkLOcal(self</span><span class="s0">,</span><span class="s1">number</span><span class="s0">,</span><span class="s1">ipv6): 
        </span><span class="s5">&quot;&quot;&quot; 
        Method wil set nhop ipv6 
        :param number: 
        :param ipv6: 
        :return: 
        &quot;&quot;&quot;</span><span class="s1"> 
        filt = self.client.talk( [</span><span class="s4">'/routing/filter/set'</span><span class="s0">, </span><span class="s4">'=numbers=' </span><span class="s1">+ number</span><span class="s0">, </span><span class="s4">'=set-out-nexthop-linklocal=' </span><span class="s1">+ ipv6] ) 
        </span><span class="s0">return </span><span class="s1">filt</span></pre>
</body>
</html>