<html>
<head>
<title>token.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(98,151,85); font-style: italic; }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(106,135,89); }
.s3 { color: rgb(204,120,50); }
.s4 { color: rgb(128,128,128); }
.s5 { color: rgb(104,151,187); }
</style>
</head>
<BODY BGCOLOR="#2b2b2b">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
token.py</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">&quot;&quot;&quot;Token constants (from &quot;token.h&quot;).&quot;&quot;&quot;</span><span class="s1"> 
 
__all__ = [</span><span class="s2">'tok_name'</span><span class="s3">, </span><span class="s2">'ISTERMINAL'</span><span class="s3">, </span><span class="s2">'ISNONTERMINAL'</span><span class="s3">, </span><span class="s2">'ISEOF'</span><span class="s1">] 
 
</span><span class="s4">#  This file is automatically generated; please don't muck it up!</span><span class="s1"> 
</span><span class="s4">#</span><span class="s1"> 
</span><span class="s4">#  To update the symbols in this file, 'cd' to the top directory of</span><span class="s1"> 
</span><span class="s4">#  the python source tree after building the interpreter and run:</span><span class="s1"> 
</span><span class="s4">#</span><span class="s1"> 
</span><span class="s4">#    ./python Lib/token.py</span><span class="s1"> 
 
</span><span class="s4">#--start constants--</span><span class="s1"> 
ENDMARKER = </span><span class="s5">0</span><span class="s1"> 
NAME = </span><span class="s5">1</span><span class="s1"> 
NUMBER = </span><span class="s5">2</span><span class="s1"> 
STRING = </span><span class="s5">3</span><span class="s1"> 
NEWLINE = </span><span class="s5">4</span><span class="s1"> 
INDENT = </span><span class="s5">5</span><span class="s1"> 
DEDENT = </span><span class="s5">6</span><span class="s1"> 
LPAR = </span><span class="s5">7</span><span class="s1"> 
RPAR = </span><span class="s5">8</span><span class="s1"> 
LSQB = </span><span class="s5">9</span><span class="s1"> 
RSQB = </span><span class="s5">10</span><span class="s1"> 
COLON = </span><span class="s5">11</span><span class="s1"> 
COMMA = </span><span class="s5">12</span><span class="s1"> 
SEMI = </span><span class="s5">13</span><span class="s1"> 
PLUS = </span><span class="s5">14</span><span class="s1"> 
MINUS = </span><span class="s5">15</span><span class="s1"> 
STAR = </span><span class="s5">16</span><span class="s1"> 
SLASH = </span><span class="s5">17</span><span class="s1"> 
VBAR = </span><span class="s5">18</span><span class="s1"> 
AMPER = </span><span class="s5">19</span><span class="s1"> 
LESS = </span><span class="s5">20</span><span class="s1"> 
GREATER = </span><span class="s5">21</span><span class="s1"> 
EQUAL = </span><span class="s5">22</span><span class="s1"> 
DOT = </span><span class="s5">23</span><span class="s1"> 
PERCENT = </span><span class="s5">24</span><span class="s1"> 
LBRACE = </span><span class="s5">25</span><span class="s1"> 
RBRACE = </span><span class="s5">26</span><span class="s1"> 
EQEQUAL = </span><span class="s5">27</span><span class="s1"> 
NOTEQUAL = </span><span class="s5">28</span><span class="s1"> 
LESSEQUAL = </span><span class="s5">29</span><span class="s1"> 
GREATEREQUAL = </span><span class="s5">30</span><span class="s1"> 
TILDE = </span><span class="s5">31</span><span class="s1"> 
CIRCUMFLEX = </span><span class="s5">32</span><span class="s1"> 
LEFTSHIFT = </span><span class="s5">33</span><span class="s1"> 
RIGHTSHIFT = </span><span class="s5">34</span><span class="s1"> 
DOUBLESTAR = </span><span class="s5">35</span><span class="s1"> 
PLUSEQUAL = </span><span class="s5">36</span><span class="s1"> 
MINEQUAL = </span><span class="s5">37</span><span class="s1"> 
STAREQUAL = </span><span class="s5">38</span><span class="s1"> 
SLASHEQUAL = </span><span class="s5">39</span><span class="s1"> 
PERCENTEQUAL = </span><span class="s5">40</span><span class="s1"> 
AMPEREQUAL = </span><span class="s5">41</span><span class="s1"> 
VBAREQUAL = </span><span class="s5">42</span><span class="s1"> 
CIRCUMFLEXEQUAL = </span><span class="s5">43</span><span class="s1"> 
LEFTSHIFTEQUAL = </span><span class="s5">44</span><span class="s1"> 
RIGHTSHIFTEQUAL = </span><span class="s5">45</span><span class="s1"> 
DOUBLESTAREQUAL = </span><span class="s5">46</span><span class="s1"> 
DOUBLESLASH = </span><span class="s5">47</span><span class="s1"> 
DOUBLESLASHEQUAL = </span><span class="s5">48</span><span class="s1"> 
AT = </span><span class="s5">49</span><span class="s1"> 
ATEQUAL = </span><span class="s5">50</span><span class="s1"> 
RARROW = </span><span class="s5">51</span><span class="s1"> 
ELLIPSIS = </span><span class="s5">52</span><span class="s1"> 
OP = </span><span class="s5">53</span><span class="s1"> 
AWAIT = </span><span class="s5">54</span><span class="s1"> 
ASYNC = </span><span class="s5">55</span><span class="s1"> 
ERRORTOKEN = </span><span class="s5">56</span><span class="s1"> 
N_TOKENS = </span><span class="s5">57</span><span class="s1"> 
NT_OFFSET = </span><span class="s5">256</span><span class="s1"> 
</span><span class="s4">#--end constants--</span><span class="s1"> 
 
tok_name = {value: name 
            </span><span class="s3">for </span><span class="s1">name</span><span class="s3">, </span><span class="s1">value </span><span class="s3">in </span><span class="s1">globals().items() 
            </span><span class="s3">if </span><span class="s1">isinstance(value</span><span class="s3">, </span><span class="s1">int) </span><span class="s3">and not </span><span class="s1">name.startswith(</span><span class="s2">'_'</span><span class="s1">)} 
__all__.extend(tok_name.values()) 
 
</span><span class="s3">def </span><span class="s1">ISTERMINAL(x): 
    </span><span class="s3">return </span><span class="s1">x &lt; NT_OFFSET 
 
</span><span class="s3">def </span><span class="s1">ISNONTERMINAL(x): 
    </span><span class="s3">return </span><span class="s1">x &gt;= NT_OFFSET 
 
</span><span class="s3">def </span><span class="s1">ISEOF(x): 
    </span><span class="s3">return </span><span class="s1">x == ENDMARKER 
 
 
</span><span class="s3">def </span><span class="s1">_main(): 
    </span><span class="s3">import </span><span class="s1">re 
    </span><span class="s3">import </span><span class="s1">sys 
    args = sys.argv[</span><span class="s5">1</span><span class="s1">:] 
    inFileName = args </span><span class="s3">and </span><span class="s1">args[</span><span class="s5">0</span><span class="s1">] </span><span class="s3">or </span><span class="s2">&quot;Include/token.h&quot;</span><span class="s1"> 
    outFileName = </span><span class="s2">&quot;Lib/token.py&quot;</span><span class="s1"> 
    </span><span class="s3">if </span><span class="s1">len(args) &gt; </span><span class="s5">1</span><span class="s1">: 
        outFileName = args[</span><span class="s5">1</span><span class="s1">] 
    </span><span class="s3">try</span><span class="s1">: 
        fp = open(inFileName) 
    </span><span class="s3">except </span><span class="s1">OSError </span><span class="s3">as </span><span class="s1">err: 
        sys.stdout.write(</span><span class="s2">&quot;I/O error: %s</span><span class="s3">\n</span><span class="s2">&quot; </span><span class="s1">% str(err)) 
        sys.exit(</span><span class="s5">1</span><span class="s1">) 
    </span><span class="s3">with </span><span class="s1">fp: 
        lines = fp.read().split(</span><span class="s2">&quot;</span><span class="s3">\n</span><span class="s2">&quot;</span><span class="s1">) 
    prog = re.compile( 
        </span><span class="s2">&quot;#define[ </span><span class="s3">\t</span><span class="s2">][ </span><span class="s3">\t</span><span class="s2">]*([A-Z0-9][A-Z0-9_]*)[ </span><span class="s3">\t</span><span class="s2">][ </span><span class="s3">\t</span><span class="s2">]*([0-9][0-9]*)&quot;</span><span class="s3">,</span><span class="s1"> 
        re.IGNORECASE) 
    tokens = {} 
    </span><span class="s3">for </span><span class="s1">line </span><span class="s3">in </span><span class="s1">lines: 
        match = prog.match(line) 
        </span><span class="s3">if </span><span class="s1">match: 
            name</span><span class="s3">, </span><span class="s1">val = match.group(</span><span class="s5">1</span><span class="s3">, </span><span class="s5">2</span><span class="s1">) 
            val = int(val) 
            tokens[val] = name          </span><span class="s4"># reverse so we can sort them...</span><span class="s1"> 
    keys = sorted(tokens.keys()) 
    </span><span class="s4"># load the output skeleton from the target:</span><span class="s1"> 
    </span><span class="s3">try</span><span class="s1">: 
        fp = open(outFileName) 
    </span><span class="s3">except </span><span class="s1">OSError </span><span class="s3">as </span><span class="s1">err: 
        sys.stderr.write(</span><span class="s2">&quot;I/O error: %s</span><span class="s3">\n</span><span class="s2">&quot; </span><span class="s1">% str(err)) 
        sys.exit(</span><span class="s5">2</span><span class="s1">) 
    </span><span class="s3">with </span><span class="s1">fp: 
        format = fp.read().split(</span><span class="s2">&quot;</span><span class="s3">\n</span><span class="s2">&quot;</span><span class="s1">) 
    </span><span class="s3">try</span><span class="s1">: 
        start = format.index(</span><span class="s2">&quot;#--start constants--&quot;</span><span class="s1">) + </span><span class="s5">1</span><span class="s1"> 
        end = format.index(</span><span class="s2">&quot;#--end constants--&quot;</span><span class="s1">) 
    </span><span class="s3">except </span><span class="s1">ValueError: 
        sys.stderr.write(</span><span class="s2">&quot;target does not contain format markers&quot;</span><span class="s1">) 
        sys.exit(</span><span class="s5">3</span><span class="s1">) 
    lines = [] 
    </span><span class="s3">for </span><span class="s1">val </span><span class="s3">in </span><span class="s1">keys: 
        lines.append(</span><span class="s2">&quot;%s = %d&quot; </span><span class="s1">% (tokens[val]</span><span class="s3">, </span><span class="s1">val)) 
    format[start:end] = lines 
    </span><span class="s3">try</span><span class="s1">: 
        fp = open(outFileName</span><span class="s3">, </span><span class="s2">'w'</span><span class="s1">) 
    </span><span class="s3">except </span><span class="s1">OSError </span><span class="s3">as </span><span class="s1">err: 
        sys.stderr.write(</span><span class="s2">&quot;I/O error: %s</span><span class="s3">\n</span><span class="s2">&quot; </span><span class="s1">% str(err)) 
        sys.exit(</span><span class="s5">4</span><span class="s1">) 
    </span><span class="s3">with </span><span class="s1">fp: 
        fp.write(</span><span class="s2">&quot;</span><span class="s3">\n</span><span class="s2">&quot;</span><span class="s1">.join(format)) 
 
 
</span><span class="s3">if </span><span class="s1">__name__ == </span><span class="s2">&quot;__main__&quot;</span><span class="s1">: 
    _main() 
</span></pre>
</body>
</html>