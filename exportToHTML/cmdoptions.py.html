<html>
<head>
<title>cmdoptions.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(98,151,85); font-style: italic; }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(204,120,50); }
.s3 { color: rgb(106,135,89); }
.s4 { color: rgb(104,151,187); }
.s5 { color: rgb(128,128,128); }
</style>
</head>
<BODY BGCOLOR="#2b2b2b">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
cmdoptions.py</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">&quot;&quot;&quot; 
shared options and groups 
 
The principle here is to define options once, but *not* instantiate them 
globally. One reason being that options with action='append' can carry state 
between parses. pip parses general options twice internally, and shouldn't 
pass on state. To be consistent, all options will follow this design. 
 
&quot;&quot;&quot;</span><span class="s1"> 
</span><span class="s2">from </span><span class="s1">__future__ </span><span class="s2">import </span><span class="s1">absolute_import 
 
</span><span class="s2">from </span><span class="s1">functools </span><span class="s2">import </span><span class="s1">partial 
</span><span class="s2">from </span><span class="s1">optparse </span><span class="s2">import </span><span class="s1">OptionGroup</span><span class="s2">, </span><span class="s1">SUPPRESS_HELP</span><span class="s2">, </span><span class="s1">Option 
</span><span class="s2">import </span><span class="s1">warnings 
 
</span><span class="s2">from </span><span class="s1">pip.index </span><span class="s2">import </span><span class="s1">( 
    FormatControl</span><span class="s2">, </span><span class="s1">fmt_ctl_handle_mutual_exclude</span><span class="s2">, </span><span class="s1">fmt_ctl_no_binary</span><span class="s2">,</span><span class="s1"> 
    fmt_ctl_no_use_wheel) 
</span><span class="s2">from </span><span class="s1">pip.models </span><span class="s2">import </span><span class="s1">PyPI 
</span><span class="s2">from </span><span class="s1">pip.locations </span><span class="s2">import </span><span class="s1">USER_CACHE_DIR</span><span class="s2">, </span><span class="s1">src_prefix 
</span><span class="s2">from </span><span class="s1">pip.utils.hashes </span><span class="s2">import </span><span class="s1">STRONG_HASHES 
 
 
</span><span class="s2">def </span><span class="s1">make_option_group(group</span><span class="s2">, </span><span class="s1">parser): 
    </span><span class="s0">&quot;&quot;&quot; 
    Return an OptionGroup object 
    group  -- assumed to be dict with 'name' and 'options' keys 
    parser -- an optparse Parser 
    &quot;&quot;&quot;</span><span class="s1"> 
    option_group = OptionGroup(parser</span><span class="s2">, </span><span class="s1">group[</span><span class="s3">'name'</span><span class="s1">]) 
    </span><span class="s2">for </span><span class="s1">option </span><span class="s2">in </span><span class="s1">group[</span><span class="s3">'options'</span><span class="s1">]: 
        option_group.add_option(option()) 
    </span><span class="s2">return </span><span class="s1">option_group 
 
 
</span><span class="s2">def </span><span class="s1">resolve_wheel_no_use_binary(options): 
    </span><span class="s2">if not </span><span class="s1">options.use_wheel: 
        control = options.format_control 
        fmt_ctl_no_use_wheel(control) 
 
 
</span><span class="s2">def </span><span class="s1">check_install_build_global(options</span><span class="s2">, </span><span class="s1">check_options=</span><span class="s2">None</span><span class="s1">): 
    </span><span class="s0">&quot;&quot;&quot;Disable wheels if per-setup.py call options are set. 
 
    :param options: The OptionParser options to update. 
    :param check_options: The options to check, if not supplied defaults to 
        options. 
    &quot;&quot;&quot;</span><span class="s1"> 
    </span><span class="s2">if </span><span class="s1">check_options </span><span class="s2">is None</span><span class="s1">: 
        check_options = options 
 
    </span><span class="s2">def </span><span class="s1">getname(n): 
        </span><span class="s2">return </span><span class="s1">getattr(check_options</span><span class="s2">, </span><span class="s1">n</span><span class="s2">, None</span><span class="s1">) 
    names = [</span><span class="s3">&quot;build_options&quot;</span><span class="s2">, </span><span class="s3">&quot;global_options&quot;</span><span class="s2">, </span><span class="s3">&quot;install_options&quot;</span><span class="s1">] 
    </span><span class="s2">if </span><span class="s1">any(map(getname</span><span class="s2">, </span><span class="s1">names)): 
        control = options.format_control 
        fmt_ctl_no_binary(control) 
        warnings.warn( 
            </span><span class="s3">'Disabling all use of wheels due to the use of --build-options '</span><span class="s1"> 
            </span><span class="s3">'/ --global-options / --install-options.'</span><span class="s2">, </span><span class="s1">stacklevel=</span><span class="s4">2</span><span class="s1">) 
 
 
</span><span class="s5">###########</span><span class="s1"> 
</span><span class="s5"># options #</span><span class="s1"> 
</span><span class="s5">###########</span><span class="s1"> 
 
help_ = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-h'</span><span class="s2">, </span><span class="s3">'--help'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'help'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'help'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Show help.'</span><span class="s1">) 
 
isolated_mode = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--isolated&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;isolated_mode&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_true&quot;</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=( 
        </span><span class="s3">&quot;Run pip in an isolated mode, ignoring environment variables and user &quot;</span><span class="s1"> 
        </span><span class="s3">&quot;configuration.&quot;</span><span class="s1"> 
    )</span><span class="s2">,</span><span class="s1"> 
) 
 
require_virtualenv = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s5"># Run only if inside a virtualenv, bail if not.</span><span class="s1"> 
    </span><span class="s3">'--require-virtualenv'</span><span class="s2">, </span><span class="s3">'--require-venv'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'require_venv'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=SUPPRESS_HELP) 
 
verbose = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-v'</span><span class="s2">, </span><span class="s3">'--verbose'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'verbose'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'count'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s4">0</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Give more output. Option is additive, and can be used up to 3 times.'</span><span class="s1"> 
) 
 
version = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-V'</span><span class="s2">, </span><span class="s3">'--version'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'version'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Show version and exit.'</span><span class="s1">) 
 
quiet = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-q'</span><span class="s2">, </span><span class="s3">'--quiet'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'quiet'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'count'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s4">0</span><span class="s2">,</span><span class="s1"> 
    help=(</span><span class="s3">'Give less output. Option is additive, and can be used up to 3'</span><span class="s1"> 
          </span><span class="s3">' times (corresponding to WARNING, ERROR, and CRITICAL logging'</span><span class="s1"> 
          </span><span class="s3">' levels).'</span><span class="s1">) 
) 
 
log = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--log&quot;</span><span class="s2">, </span><span class="s3">&quot;--log-file&quot;</span><span class="s2">, </span><span class="s3">&quot;--local-log&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;log&quot;</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">&quot;path&quot;</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Path to a verbose appending log.&quot;</span><span class="s1"> 
) 
 
no_input = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s5"># Don't ask for input</span><span class="s1"> 
    </span><span class="s3">'--no-input'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'no_input'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=SUPPRESS_HELP) 
 
proxy = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--proxy'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'proxy'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'str'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s3">''</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Specify a proxy in the form [user:passwd@]proxy.server:port.&quot;</span><span class="s1">) 
 
retries = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--retries'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'retries'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'int'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s4">5</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Maximum number of retries each connection should attempt &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;(default %default times).&quot;</span><span class="s1">) 
 
timeout = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--timeout'</span><span class="s2">, </span><span class="s3">'--default-timeout'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'sec'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'timeout'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'float'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s4">15</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Set the socket timeout (default %default seconds).'</span><span class="s1">) 
 
default_vcs = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s5"># The default version control system for editables, e.g. 'svn'</span><span class="s1"> 
    </span><span class="s3">'--default-vcs'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'default_vcs'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'str'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s3">''</span><span class="s2">,</span><span class="s1"> 
    help=SUPPRESS_HELP) 
 
skip_requirements_regex = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s5"># A regex to be used to skip requirements</span><span class="s1"> 
    </span><span class="s3">'--skip-requirements-regex'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'skip_requirements_regex'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'str'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s3">''</span><span class="s2">,</span><span class="s1"> 
    help=SUPPRESS_HELP) 
 
 
</span><span class="s2">def </span><span class="s1">exists_action(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s5"># Option when path already exist</span><span class="s1"> 
        </span><span class="s3">'--exists-action'</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">'exists_action'</span><span class="s2">,</span><span class="s1"> 
        type=</span><span class="s3">'choice'</span><span class="s2">,</span><span class="s1"> 
        choices=[</span><span class="s3">'s'</span><span class="s2">, </span><span class="s3">'i'</span><span class="s2">, </span><span class="s3">'w'</span><span class="s2">, </span><span class="s3">'b'</span><span class="s2">, </span><span class="s3">'a'</span><span class="s1">]</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">'action'</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">&quot;Default action when a path already exists: &quot;</span><span class="s1"> 
        </span><span class="s3">&quot;(s)witch, (i)gnore, (w)ipe, (b)ackup, (a)bort.&quot;</span><span class="s1">) 
 
 
cert = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--cert'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'cert'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'str'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'path'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Path to alternate CA bundle.&quot;</span><span class="s1">) 
 
client_cert = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--client-cert'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'client_cert'</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'str'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">None,</span><span class="s1"> 
    metavar=</span><span class="s3">'path'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Path to SSL client certificate, a single file containing the &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;private key and the certificate in PEM format.&quot;</span><span class="s1">) 
 
index_url = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-i'</span><span class="s2">, </span><span class="s3">'--index-url'</span><span class="s2">, </span><span class="s3">'--pypi-url'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'index_url'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'URL'</span><span class="s2">,</span><span class="s1"> 
    default=PyPI.simple_url</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Base URL of Python Package Index (default %default). &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;This should point to a repository compliant with PEP 503 &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;(the simple repository API) or a local directory laid out &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;in the same format.&quot;</span><span class="s1">) 
 
 
</span><span class="s2">def </span><span class="s1">extra_index_url(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">'--extra-index-url'</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">'extra_index_urls'</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">'URL'</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">&quot;Extra URLs of package indexes to use in addition to &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;--index-url. Should follow the same rules as &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;--index-url.&quot;</span><span class="s1"> 
    ) 
 
 
no_index = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--no-index'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'no_index'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">'Ignore package index (only looking at --find-links URLs instead).'</span><span class="s1">) 
 
 
</span><span class="s2">def </span><span class="s1">find_links(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">'-f'</span><span class="s2">, </span><span class="s3">'--find-links'</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">'find_links'</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">'url'</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">&quot;If a url or path to an html file, then parse for links to &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;archives. If a local path or file:// url that's a directory, &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;then look for archives in the directory listing.&quot;</span><span class="s1">) 
 
 
</span><span class="s2">def </span><span class="s1">allow_external(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">&quot;--allow-external&quot;</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">&quot;allow_external&quot;</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">&quot;append&quot;</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">&quot;PACKAGE&quot;</span><span class="s2">,</span><span class="s1"> 
        help=SUPPRESS_HELP</span><span class="s2">,</span><span class="s1"> 
    ) 
 
 
allow_all_external = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--allow-all-external&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;allow_all_external&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_true&quot;</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=SUPPRESS_HELP</span><span class="s2">,</span><span class="s1"> 
) 
 
 
</span><span class="s2">def </span><span class="s1">trusted_host(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">&quot;--trusted-host&quot;</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">&quot;trusted_hosts&quot;</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">&quot;append&quot;</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">&quot;HOSTNAME&quot;</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">&quot;Mark this host as trusted, even though it does not have valid &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;or any HTTPS.&quot;</span><span class="s2">,</span><span class="s1"> 
    ) 
 
 
</span><span class="s5"># Remove after 7.0</span><span class="s1"> 
no_allow_external = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--no-allow-external&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;allow_all_external&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_false&quot;</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=SUPPRESS_HELP</span><span class="s2">,</span><span class="s1"> 
) 
 
 
</span><span class="s5"># Remove --allow-insecure after 7.0</span><span class="s1"> 
</span><span class="s2">def </span><span class="s1">allow_unsafe(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">&quot;--allow-unverified&quot;</span><span class="s2">, </span><span class="s3">&quot;--allow-insecure&quot;</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">&quot;allow_unverified&quot;</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">&quot;append&quot;</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">&quot;PACKAGE&quot;</span><span class="s2">,</span><span class="s1"> 
        help=SUPPRESS_HELP</span><span class="s2">,</span><span class="s1"> 
    ) 
 
</span><span class="s5"># Remove after 7.0</span><span class="s1"> 
no_allow_unsafe = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--no-allow-insecure&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;allow_all_insecure&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_false&quot;</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=SUPPRESS_HELP 
) 
 
</span><span class="s5"># Remove after 1.5</span><span class="s1"> 
process_dependency_links = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--process-dependency-links&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;process_dependency_links&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_true&quot;</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Enable the processing of dependency links.&quot;</span><span class="s2">,</span><span class="s1"> 
) 
 
 
</span><span class="s2">def </span><span class="s1">constraints(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">'-c'</span><span class="s2">, </span><span class="s3">'--constraint'</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">'constraints'</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">'file'</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">'Constrain versions using the given constraints file. '</span><span class="s1"> 
        </span><span class="s3">'This option can be used multiple times.'</span><span class="s1">) 
 
 
</span><span class="s2">def </span><span class="s1">requirements(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">'-r'</span><span class="s2">, </span><span class="s3">'--requirement'</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">'requirements'</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">'file'</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">'Install from the given requirements file. '</span><span class="s1"> 
        </span><span class="s3">'This option can be used multiple times.'</span><span class="s1">) 
 
 
</span><span class="s2">def </span><span class="s1">editable(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">'-e'</span><span class="s2">, </span><span class="s3">'--editable'</span><span class="s2">,</span><span class="s1"> 
        dest=</span><span class="s3">'editables'</span><span class="s2">,</span><span class="s1"> 
        action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
        default=[]</span><span class="s2">,</span><span class="s1"> 
        metavar=</span><span class="s3">'path/url'</span><span class="s2">,</span><span class="s1"> 
        help=(</span><span class="s3">'Install a project in editable mode (i.e. setuptools '</span><span class="s1"> 
              </span><span class="s3">'&quot;develop mode&quot;) from a local project path or a VCS url.'</span><span class="s1">)</span><span class="s2">,</span><span class="s1"> 
    ) 
 
src = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--src'</span><span class="s2">, </span><span class="s3">'--source'</span><span class="s2">, </span><span class="s3">'--source-dir'</span><span class="s2">, </span><span class="s3">'--source-directory'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'src_dir'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'dir'</span><span class="s2">,</span><span class="s1"> 
    default=src_prefix</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Directory to check out editable projects into. '</span><span class="s1"> 
    </span><span class="s3">'The default in a virtualenv is &quot;&lt;venv path&gt;/src&quot;. '</span><span class="s1"> 
    </span><span class="s3">'The default for global installs is &quot;&lt;current dir&gt;/src&quot;.'</span><span class="s1"> 
) 
 
</span><span class="s5"># XXX: deprecated, remove in 9.0</span><span class="s1"> 
use_wheel = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--use-wheel'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'use_wheel'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">True,</span><span class="s1"> 
    help=SUPPRESS_HELP</span><span class="s2">,</span><span class="s1"> 
) 
 
</span><span class="s5"># XXX: deprecated, remove in 9.0</span><span class="s1"> 
no_use_wheel = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--no-use-wheel'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'use_wheel'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_false'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">True,</span><span class="s1"> 
    help=(</span><span class="s3">'Do not Find and prefer wheel archives when searching indexes and '</span><span class="s1"> 
          </span><span class="s3">'find-links locations. DEPRECATED in favour of --no-binary.'</span><span class="s1">)</span><span class="s2">,</span><span class="s1"> 
) 
 
 
</span><span class="s2">def </span><span class="s1">_get_format_control(values</span><span class="s2">, </span><span class="s1">option): 
    </span><span class="s0">&quot;&quot;&quot;Get a format_control object.&quot;&quot;&quot;</span><span class="s1"> 
    </span><span class="s2">return </span><span class="s1">getattr(values</span><span class="s2">, </span><span class="s1">option.dest) 
 
 
</span><span class="s2">def </span><span class="s1">_handle_no_binary(option</span><span class="s2">, </span><span class="s1">opt_str</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">parser): 
    existing = getattr(parser.values</span><span class="s2">, </span><span class="s1">option.dest) 
    fmt_ctl_handle_mutual_exclude( 
        value</span><span class="s2">, </span><span class="s1">existing.no_binary</span><span class="s2">, </span><span class="s1">existing.only_binary) 
 
 
</span><span class="s2">def </span><span class="s1">_handle_only_binary(option</span><span class="s2">, </span><span class="s1">opt_str</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">parser): 
    existing = getattr(parser.values</span><span class="s2">, </span><span class="s1">option.dest) 
    fmt_ctl_handle_mutual_exclude( 
        value</span><span class="s2">, </span><span class="s1">existing.only_binary</span><span class="s2">, </span><span class="s1">existing.no_binary) 
 
 
</span><span class="s2">def </span><span class="s1">no_binary(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">&quot;--no-binary&quot;</span><span class="s2">, </span><span class="s1">dest=</span><span class="s3">&quot;format_control&quot;</span><span class="s2">, </span><span class="s1">action=</span><span class="s3">&quot;callback&quot;</span><span class="s2">,</span><span class="s1"> 
        callback=_handle_no_binary</span><span class="s2">, </span><span class="s1">type=</span><span class="s3">&quot;str&quot;</span><span class="s2">,</span><span class="s1"> 
        default=FormatControl(set()</span><span class="s2">, </span><span class="s1">set())</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">&quot;Do not use binary packages. Can be supplied multiple times, and &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;each time adds to the existing value. Accepts either :all: to &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;disable all binary packages, :none: to empty the set, or one or &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;more package names with commas between them. Note that some &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;packages are tricky to compile and may fail to install when &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;this option is used on them.&quot;</span><span class="s1">) 
 
 
</span><span class="s2">def </span><span class="s1">only_binary(): 
    </span><span class="s2">return </span><span class="s1">Option( 
        </span><span class="s3">&quot;--only-binary&quot;</span><span class="s2">, </span><span class="s1">dest=</span><span class="s3">&quot;format_control&quot;</span><span class="s2">, </span><span class="s1">action=</span><span class="s3">&quot;callback&quot;</span><span class="s2">,</span><span class="s1"> 
        callback=_handle_only_binary</span><span class="s2">, </span><span class="s1">type=</span><span class="s3">&quot;str&quot;</span><span class="s2">,</span><span class="s1"> 
        default=FormatControl(set()</span><span class="s2">, </span><span class="s1">set())</span><span class="s2">,</span><span class="s1"> 
        help=</span><span class="s3">&quot;Do not use source packages. Can be supplied multiple times, and &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;each time adds to the existing value. Accepts either :all: to &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;disable all source packages, :none: to empty the set, or one or &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;more package names with commas between them. Packages without &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;binary distributions will fail to install when this option is &quot;</span><span class="s1"> 
             </span><span class="s3">&quot;used on them.&quot;</span><span class="s1">) 
 
 
cache_dir = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--cache-dir&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;cache_dir&quot;</span><span class="s2">,</span><span class="s1"> 
    default=USER_CACHE_DIR</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">&quot;dir&quot;</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Store the cache data in &lt;dir&gt;.&quot;</span><span class="s1"> 
) 
 
no_cache = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--no-cache-dir&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;cache_dir&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_false&quot;</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Disable the cache.&quot;</span><span class="s2">,</span><span class="s1"> 
) 
 
no_deps = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--no-deps'</span><span class="s2">, </span><span class="s3">'--no-dependencies'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'ignore_dependencies'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Don't install package dependencies.&quot;</span><span class="s1">) 
 
build_dir = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-b'</span><span class="s2">, </span><span class="s3">'--build'</span><span class="s2">, </span><span class="s3">'--build-dir'</span><span class="s2">, </span><span class="s3">'--build-directory'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'build_dir'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'dir'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Directory to unpack packages into and build in.'</span><span class="s1"> 
) 
 
ignore_requires_python = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--ignore-requires-python'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'ignore_requires_python'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">'Ignore the Requires-Python information.'</span><span class="s1">) 
 
install_options = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--install-option'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'install_options'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'options'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Extra arguments to be supplied to the setup.py install &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;command (use like --install-option=</span><span class="s2">\&quot;</span><span class="s3">--install-scripts=/usr/local/&quot;</span><span class="s1"> 
         </span><span class="s3">&quot;bin</span><span class="s2">\&quot;</span><span class="s3">). Use multiple --install-option options to pass multiple &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;options to setup.py install. If you are using an option with a &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;directory path, be sure to use absolute path.&quot;</span><span class="s1">) 
 
global_options = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--global-option'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'global_options'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'append'</span><span class="s2">,</span><span class="s1"> 
    metavar=</span><span class="s3">'options'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Extra global options to be supplied to the setup.py &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;call before the install command.&quot;</span><span class="s1">) 
 
no_clean = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--no-clean'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Don't clean up build directories.&quot;</span><span class="s1">) 
 
pre = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--pre'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Include pre-release and development versions. By default, &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;pip only finds stable versions.&quot;</span><span class="s1">) 
 
disable_pip_version_check = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">&quot;--disable-pip-version-check&quot;</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">&quot;disable_pip_version_check&quot;</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">&quot;store_true&quot;</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Don't periodically check PyPI to determine whether a new version &quot;</span><span class="s1"> 
         </span><span class="s3">&quot;of pip is available for download. Implied with --no-index.&quot;</span><span class="s1">) 
 
</span><span class="s5"># Deprecated, Remove later</span><span class="s1"> 
always_unzip = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'-Z'</span><span class="s2">, </span><span class="s3">'--always-unzip'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'always_unzip'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    help=SUPPRESS_HELP</span><span class="s2">,</span><span class="s1"> 
) 
 
 
</span><span class="s2">def </span><span class="s1">_merge_hash(option</span><span class="s2">, </span><span class="s1">opt_str</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">parser): 
    </span><span class="s0">&quot;&quot;&quot;Given a value spelled &quot;algo:digest&quot;, append the digest to a list 
    pointed to in a dict by the algo name.&quot;&quot;&quot;</span><span class="s1"> 
    </span><span class="s2">if not </span><span class="s1">parser.values.hashes: 
        parser.values.hashes = {} 
    </span><span class="s2">try</span><span class="s1">: 
        algo</span><span class="s2">, </span><span class="s1">digest = value.split(</span><span class="s3">':'</span><span class="s2">, </span><span class="s4">1</span><span class="s1">) 
    </span><span class="s2">except </span><span class="s1">ValueError: 
        parser.error(</span><span class="s3">'Arguments to %s must be a hash name '</span><span class="s1"> 
                     </span><span class="s3">'followed by a value, like --hash=sha256:abcde...' </span><span class="s1">% 
                     opt_str) 
    </span><span class="s2">if </span><span class="s1">algo </span><span class="s2">not in </span><span class="s1">STRONG_HASHES: 
        parser.error(</span><span class="s3">'Allowed hash algorithms for %s are %s.' </span><span class="s1">% 
                     (opt_str</span><span class="s2">, </span><span class="s3">', '</span><span class="s1">.join(STRONG_HASHES))) 
    parser.values.hashes.setdefault(algo</span><span class="s2">, </span><span class="s1">[]).append(digest) 
 
 
hash = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--hash'</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s5"># Hash values eventually end up in InstallRequirement.hashes due to</span><span class="s1"> 
    </span><span class="s5"># __dict__ copying in process_line().</span><span class="s1"> 
    dest=</span><span class="s3">'hashes'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'callback'</span><span class="s2">,</span><span class="s1"> 
    callback=_merge_hash</span><span class="s2">,</span><span class="s1"> 
    type=</span><span class="s3">'string'</span><span class="s2">,</span><span class="s1"> 
    help=</span><span class="s3">&quot;Verify that the package's archive matches this &quot;</span><span class="s1"> 
         </span><span class="s3">'hash before installing. Example: --hash=sha256:abcdef...'</span><span class="s1">) 
 
 
require_hashes = partial( 
    Option</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'--require-hashes'</span><span class="s2">,</span><span class="s1"> 
    dest=</span><span class="s3">'require_hashes'</span><span class="s2">,</span><span class="s1"> 
    action=</span><span class="s3">'store_true'</span><span class="s2">,</span><span class="s1"> 
    default=</span><span class="s2">False,</span><span class="s1"> 
    help=</span><span class="s3">'Require a hash to check each requirement against, for '</span><span class="s1"> 
         </span><span class="s3">'repeatable installs. This option is implied when any package in a '</span><span class="s1"> 
         </span><span class="s3">'requirements file has a --hash option.'</span><span class="s1">) 
 
 
</span><span class="s5">##########</span><span class="s1"> 
</span><span class="s5"># groups #</span><span class="s1"> 
</span><span class="s5">##########</span><span class="s1"> 
 
general_group = { 
    </span><span class="s3">'name'</span><span class="s1">: </span><span class="s3">'General Options'</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'options'</span><span class="s1">: [ 
        help_</span><span class="s2">,</span><span class="s1"> 
        isolated_mode</span><span class="s2">,</span><span class="s1"> 
        require_virtualenv</span><span class="s2">,</span><span class="s1"> 
        verbose</span><span class="s2">,</span><span class="s1"> 
        version</span><span class="s2">,</span><span class="s1"> 
        quiet</span><span class="s2">,</span><span class="s1"> 
        log</span><span class="s2">,</span><span class="s1"> 
        no_input</span><span class="s2">,</span><span class="s1"> 
        proxy</span><span class="s2">,</span><span class="s1"> 
        retries</span><span class="s2">,</span><span class="s1"> 
        timeout</span><span class="s2">,</span><span class="s1"> 
        default_vcs</span><span class="s2">,</span><span class="s1"> 
        skip_requirements_regex</span><span class="s2">,</span><span class="s1"> 
        exists_action</span><span class="s2">,</span><span class="s1"> 
        trusted_host</span><span class="s2">,</span><span class="s1"> 
        cert</span><span class="s2">,</span><span class="s1"> 
        client_cert</span><span class="s2">,</span><span class="s1"> 
        cache_dir</span><span class="s2">,</span><span class="s1"> 
        no_cache</span><span class="s2">,</span><span class="s1"> 
        disable_pip_version_check</span><span class="s2">,</span><span class="s1"> 
    ] 
} 
 
non_deprecated_index_group = { 
    </span><span class="s3">'name'</span><span class="s1">: </span><span class="s3">'Package Index Options'</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'options'</span><span class="s1">: [ 
        index_url</span><span class="s2">,</span><span class="s1"> 
        extra_index_url</span><span class="s2">,</span><span class="s1"> 
        no_index</span><span class="s2">,</span><span class="s1"> 
        find_links</span><span class="s2">,</span><span class="s1"> 
        process_dependency_links</span><span class="s2">,</span><span class="s1"> 
    ] 
} 
 
index_group = { 
    </span><span class="s3">'name'</span><span class="s1">: </span><span class="s3">'Package Index Options (including deprecated options)'</span><span class="s2">,</span><span class="s1"> 
    </span><span class="s3">'options'</span><span class="s1">: non_deprecated_index_group[</span><span class="s3">'options'</span><span class="s1">] + [ 
        allow_external</span><span class="s2">,</span><span class="s1"> 
        allow_all_external</span><span class="s2">,</span><span class="s1"> 
        no_allow_external</span><span class="s2">,</span><span class="s1"> 
        allow_unsafe</span><span class="s2">,</span><span class="s1"> 
        no_allow_unsafe</span><span class="s2">,</span><span class="s1"> 
    ] 
} 
</span></pre>
</body>
</html>